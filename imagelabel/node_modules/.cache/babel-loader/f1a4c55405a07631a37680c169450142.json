{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/\\uAD8C\\uAD6D\\uC6D0/Desktop/\\uC0B0\\uD559\\uD611\\uB825\\uD50C\\uC81D/src/imagelabel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/\\uAD8C\\uAD6D\\uC6D0/Desktop/\\uC0B0\\uD559\\uD611\\uB825\\uD50C\\uC81D/src/imagelabel/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\\\uAD8C\\uAD6D\\uC6D0\\\\Desktop\\\\\\uC0B0\\uD559\\uD611\\uB825\\uD50C\\uC81D\\\\src\\\\imagelabel\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useEffect,useRef,ProgressBar}from\"react\";import{Route,Routes,useLocation,useNavigate}from\"react-router-dom\";import ReactSlider from\"react-slider\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function useInterval(callback,delay){var savedCallback=useRef();// Remember the latest callback.\nuseEffect(function(){savedCallback.current=callback;},[callback]);// Set up the interval.\nuseEffect(function(){function tick(){savedCallback.current();}if(delay!==null){var id=setInterval(tick,delay);return function(){return clearInterval(id);};}},[delay]);}export default function Main(_ref){var updateLogedIn=_ref.updateLogedIn,loginState=_ref.loginState;var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),frameList=_useState2[0],setFrameList=_useState2[1];var frameRef=useRef(null);var frameWidthRef=useRef(null);var selectRef=useRef(null);useEffect(function(){if(loginState===false)navigate(\"/\");function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"http://localhost:5000/getLabelList\").then(function(res){console.log(res.data);setFrameList(res.data);setSelectList([]);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),delay=_useState4[0],setDelay=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),now=_useState6[0],setNow=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selectList=_useState8[0],setSelectList=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),playChk=_useState10[0],setPlayChk=_useState10[1];useInterval(function(){setNow(now+1);//console.log(now);\n},frameList!==null&&now<frameList.list.Labels.length-1?delay:null);useEffect(function(){if(frameList===null||frameRef===null||frameWidthRef===null)return;console.log(frameWidthRef.current.offsetWidth);frameRef.current.scrollTo(frameWidthRef.current.offsetWidth*now,0);//frameRef.current.scrollIntoView(100, 100);\n//console.log(e.target.scrollTo(500, 500));\n//console.log(frameRef.current);\n},[now,frameRef,frameWidthRef]);return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100vw\",height:\"100vh\",alignContent:\"center\",alignItems:\"center\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"10px\",justifyContent:\"flex-end\",width:\"100vw\",marginRight:\"10vw\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"30px\",fontWeight:\"bold\",borderRadius:\"10px\",padding:\"10px\",border:\"1px solid #828282\",cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(frameList===null)){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_context2.next=4;return axios.post(\"http://localhost:5000/selectLabel\",{selectList:selectList}).then(function(res){console.log(res.data);if(res.data.status===\"false\")window.alert(\"프레임을 선택해주세요.\");else if(res.data.status===\"true\"){window.alert(\"선택 프레임이 제출되었습니다.\");}setSelectList([]);});case 4:case\"end\":return _context2.stop();}}},_callee2);})),children:\"\\uC81C\\uCD9C\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"10px\",fontSize:\"30px\",fontWeight:\"bold\",borderRadius:\"10px\",padding:\"10px\",border:\"1px solid #828282\",cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(frameList===null)){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:setSelectList([]);_context3.next=5;return axios.post(\"http://localhost:5000/newLabelList\",{prevId:frameList.list.id}).then(function(res){console.log(res.data);setFrameList(res.data);});case 5:case\"end\":return _context3.stop();}}},_callee3);})),children:\"\\uB2E4\\uB978\\uD504\\uB808\\uC784\"})]}),frameList!==null&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"10px\",maxWidth:\"80vw\",maxHeight:\"40vh\"},children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:5000/outputs/\".concat(frameList.list.name,\"/\").concat(frameList.list.Labels[now].name),style:{maxWidth:\"80vw\",maxHeight:\"40vh\"}})}),frameList!==null&&/*#__PURE__*/_jsx(\"input\",{type:\"range\",value:now,style:{width:\"80vw\",height:\"20px\"},max:frameList.list.Labels.length-1,min:0,onChange:function onChange(e){setNow(parseInt(e.target.value));}}),/*#__PURE__*/_jsxs(\"div\",{ref:frameRef,style:{marginTop:\"10px\",overflow:\"scroll\",overflowY:\"hidden\",maxWidth:\"80vw\",maxHeight:\"20vh\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{}}),frameList!==null&&frameList.list.Labels.map(function(list,idx){return/*#__PURE__*/_jsx(\"div\",{ref:frameWidthRef,style:now!==idx?{maxWidth:\"20vh\",maxHeight:\"20vh\",justifyContent:\"center\",alignContent:\"center\",alignItems:\"center\"}:{border:\"3px solid #828282\",maxWidth:\"20vh\",justifyContent:\"center\",alignContent:\"center\",alignItems:\"center\",maxHeight:\"20vh\"},children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:5000/outputs/\".concat(frameList.list.name,\"/\").concat(list.name),style:list.select===true?{boxSizing:\"border-box\",border:\"1px solid green\",borderRadius:\"50vh\",maxWidth:\"20vh\",maxHeight:\"20vh\"}:{maxWidth:\"20vh\",maxHeight:\"20vh\"}})});})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"10px\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginRight:\"10px\",borderRadius:\"10px\",border:\"1px solid #828282\",padding:\"10px\"},onClick:function onClick(){if(frameList===null)return;setDelay(null);setPlayChk(false);if(now>=1)setNow(now-1);},children:\"\\uC774\\uC804 \\uD504\\uB808\\uC784\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginRight:\"10px\",borderRadius:\"10px\",border:\"1px solid #828282\",padding:\"10px\"},onClick:function onClick(){if(frameList===null)return;if(playChk===false){setPlayChk(true);setDelay(null);setDelay(50);}else{setPlayChk(false);setDelay(null);}},children:playChk===false?\"재생\":\"멈춤\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginRight:\"10px\",borderRadius:\"10px\",border:\"1px solid #828282\",padding:\"10px\"},onClick:function onClick(){if(frameList===null)return;setDelay(null);setPlayChk(false);if(frameList.list.Labels.length-1>now)setNow(now+1);},children:\"\\uB2E4\\uC74C\\uD504\\uB808\\uC784\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginRight:\"10px\",borderRadius:\"10px\",border:\"1px solid #828282\",padding:\"10px\"},onClick:function onClick(){setDelay(null);setPlayChk(false);if(frameList.list.Labels[now].select===false){if(selectList.length<=9){setSelectList(selectList.concat(frameList.list.Labels[now]));frameList.list.Labels[now].select=true;}else window.alert(\"프레임은 최대 10개까지 고를수 있습니다.\");}else if(frameList.list.Labels[now].select===true){setSelectList(selectList.filter(function(val,idx){return val.id!==frameList.list.Labels[now].id;}));frameList.list.Labels[now].select=false;}},children:\"\\uC120\\uD0DD\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"10px\",overflow:\"scroll\",overflowY:\"hidden\",maxWidth:\"80vw\",maxHeight:\"20vh\"},children:selectList.map(function(list,idx){return/*#__PURE__*/_jsx(\"div\",{style:{order:list.id},children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:5000/outputs/\".concat(frameList.list.name,\"/\").concat(list.name),style:{maxWidth:\"20vh\",maxHeight:\"20vh\"}})});})})]});}","map":{"version":3,"sources":["C:/Users/권국원/Desktop/산학협력플젝/src/imagelabel/src/components/main.js"],"names":["useState","useEffect","useRef","ProgressBar","Route","Routes","useLocation","useNavigate","ReactSlider","axios","useInterval","callback","delay","savedCallback","current","tick","id","setInterval","clearInterval","Main","updateLogedIn","loginState","navigate","frameList","setFrameList","frameRef","frameWidthRef","selectRef","fetchData","post","then","res","console","log","data","setSelectList","setDelay","now","setNow","selectList","playChk","setPlayChk","list","Labels","length","offsetWidth","scrollTo","width","height","alignContent","alignItems","flexDirection","marginTop","justifyContent","marginRight","fontSize","fontWeight","borderRadius","padding","border","cursor","status","window","alert","marginLeft","prevId","maxWidth","maxHeight","name","e","parseInt","target","value","overflow","overflowY","map","idx","select","boxSizing","concat","filter","val","order"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef, ProgressBar } from \"react\";\r\nimport { Route, Routes, useLocation, useNavigate } from \"react-router-dom\";\r\nimport ReactSlider from \"react-slider\";\r\nimport axios from \"axios\";\r\n\r\nfunction useInterval(callback, delay) {\r\n  const savedCallback = useRef();\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      let id = setInterval(tick, delay);\r\n      return () => clearInterval(id);\r\n    }\r\n  }, [delay]);\r\n}\r\n\r\nexport default function Main({ updateLogedIn, loginState }) {\r\n  const navigate = useNavigate();\r\n  const [frameList, setFrameList] = useState(null);\r\n  const frameRef = useRef(null);\r\n  const frameWidthRef = useRef(null);\r\n  const selectRef = useRef(null);\r\n  useEffect(() => {\r\n    if (loginState === false) navigate(\"/\");\r\n    async function fetchData() {\r\n      await axios.post(`http://localhost:5000/getLabelList`).then((res) => {\r\n        console.log(res.data);\r\n        setFrameList(res.data);\r\n        setSelectList([]);\r\n      });\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  const [delay, setDelay] = useState(null);\r\n  const [now, setNow] = useState(0);\r\n  const [selectList, setSelectList] = useState([]);\r\n  const [playChk, setPlayChk] = useState(false);\r\n\r\n  useInterval(\r\n    () => {\r\n      setNow(now + 1);\r\n      //console.log(now);\r\n    },\r\n    frameList !== null && now < frameList.list.Labels.length - 1 ? delay : null\r\n  );\r\n  useEffect(() => {\r\n    if (frameList === null || frameRef === null || frameWidthRef === null)\r\n      return;\r\n    console.log(frameWidthRef.current.offsetWidth);\r\n    frameRef.current.scrollTo(frameWidthRef.current.offsetWidth * now, 0);\r\n    //frameRef.current.scrollIntoView(100, 100);\r\n    //console.log(e.target.scrollTo(500, 500));\r\n\r\n    //console.log(frameRef.current);\r\n  }, [now, frameRef, frameWidthRef]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        width: \"100vw\",\r\n        height: \"100vh\",\r\n        alignContent: \"center\",\r\n        alignItems: \"center\",\r\n        flexDirection: \"column\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          marginTop: \"10px\",\r\n          justifyContent: \"flex-end\",\r\n          width: \"100vw\",\r\n          marginRight: \"10vw\",\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            fontSize: \"30px\",\r\n            fontWeight: \"bold\",\r\n            borderRadius: \"10px\",\r\n            padding: \"10px\",\r\n            border: \"1px solid #828282\",\r\n            cursor: \"pointer\",\r\n          }}\r\n          onClick={async () => {\r\n            if (frameList === null) return;\r\n            await axios\r\n              .post(`http://localhost:5000/selectLabel`, {\r\n                selectList: selectList,\r\n              })\r\n              .then((res) => {\r\n                console.log(res.data);\r\n                if (res.data.status === \"false\")\r\n                  window.alert(\"프레임을 선택해주세요.\");\r\n                else if (res.data.status === \"true\") {\r\n                  window.alert(\"선택 프레임이 제출되었습니다.\");\r\n                }\r\n                setSelectList([]);\r\n              });\r\n          }}\r\n        >\r\n          제출\r\n        </div>\r\n        <div\r\n          style={{\r\n            marginLeft: \"10px\",\r\n            fontSize: \"30px\",\r\n            fontWeight: \"bold\",\r\n            borderRadius: \"10px\",\r\n            padding: \"10px\",\r\n            border: \"1px solid #828282\",\r\n            cursor: \"pointer\",\r\n          }}\r\n          onClick={async () => {\r\n            if (frameList === null) return;\r\n            setSelectList([]);\r\n            await axios\r\n              .post(`http://localhost:5000/newLabelList`, {\r\n                prevId: frameList.list.id,\r\n              })\r\n              .then((res) => {\r\n                console.log(res.data);\r\n                setFrameList(res.data);\r\n              });\r\n          }}\r\n        >\r\n          다른프레임\r\n        </div>\r\n      </div>\r\n      {frameList !== null && (\r\n        <div style={{ marginTop: \"10px\", maxWidth: \"80vw\", maxHeight: \"40vh\" }}>\r\n          <img\r\n            src={`http://localhost:5000/outputs/${frameList.list.name}/${frameList.list.Labels[now].name}`}\r\n            style={{ maxWidth: \"80vw\", maxHeight: \"40vh\" }}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {frameList !== null && (\r\n        <input\r\n          type=\"range\"\r\n          value={now}\r\n          style={{ width: \"80vw\", height: \"20px\" }}\r\n          max={frameList.list.Labels.length - 1}\r\n          min={0}\r\n          onChange={(e) => {\r\n            setNow(parseInt(e.target.value));\r\n          }}\r\n        />\r\n      )}\r\n\r\n      <div\r\n        ref={frameRef}\r\n        style={{\r\n          marginTop: \"10px\",\r\n          overflow: \"scroll\",\r\n          overflowY: \"hidden\",\r\n          maxWidth: \"80vw\",\r\n          maxHeight: \"20vh\",\r\n        }}\r\n      >\r\n        <div style={{}}></div>\r\n        {frameList !== null &&\r\n          frameList.list.Labels.map((list, idx) => (\r\n            <div\r\n              ref={frameWidthRef}\r\n              style={\r\n                now !== idx\r\n                  ? {\r\n                      maxWidth: \"20vh\",\r\n                      maxHeight: \"20vh\",\r\n                      justifyContent: \"center\",\r\n                      alignContent: \"center\",\r\n                      alignItems: \"center\",\r\n                    }\r\n                  : {\r\n                      border: \"3px solid #828282\",\r\n                      maxWidth: \"20vh\",\r\n                      justifyContent: \"center\",\r\n                      alignContent: \"center\",\r\n                      alignItems: \"center\",\r\n                      maxHeight: \"20vh\",\r\n                    }\r\n              }\r\n            >\r\n              {/*<div>{list.select === true && \"123\"}</div>*/}\r\n              <img\r\n                src={`http://localhost:5000/outputs/${frameList.list.name}/${list.name}`}\r\n                style={\r\n                  list.select === true\r\n                    ? {\r\n                        boxSizing: \"border-box\",\r\n                        border: \"1px solid green\",\r\n                        borderRadius: \"50vh\",\r\n                        maxWidth: \"20vh\",\r\n                        maxHeight: \"20vh\",\r\n                      }\r\n                    : {\r\n                        maxWidth: \"20vh\",\r\n                        maxHeight: \"20vh\",\r\n                      }\r\n                }\r\n              />\r\n            </div>\r\n          ))}\r\n      </div>\r\n      <div style={{ marginTop: \"10px\" }}>\r\n        <div\r\n          style={{\r\n            marginRight: \"10px\",\r\n            borderRadius: \"10px\",\r\n            border: \"1px solid #828282\",\r\n            padding: \"10px\",\r\n          }}\r\n          onClick={() => {\r\n            if (frameList === null) return;\r\n            setDelay(null);\r\n            setPlayChk(false);\r\n            if (now >= 1) setNow(now - 1);\r\n          }}\r\n        >\r\n          이전 프레임\r\n        </div>\r\n        <div\r\n          style={{\r\n            marginRight: \"10px\",\r\n            borderRadius: \"10px\",\r\n            border: \"1px solid #828282\",\r\n            padding: \"10px\",\r\n          }}\r\n          onClick={() => {\r\n            if (frameList === null) return;\r\n            if (playChk === false) {\r\n              setPlayChk(true);\r\n              setDelay(null);\r\n              setDelay(50);\r\n            } else {\r\n              setPlayChk(false);\r\n              setDelay(null);\r\n            }\r\n          }}\r\n        >\r\n          {playChk === false ? \"재생\" : \"멈춤\"}\r\n        </div>\r\n        <div\r\n          style={{\r\n            marginRight: \"10px\",\r\n            borderRadius: \"10px\",\r\n            border: \"1px solid #828282\",\r\n            padding: \"10px\",\r\n          }}\r\n          onClick={() => {\r\n            if (frameList === null) return;\r\n            setDelay(null);\r\n            setPlayChk(false);\r\n            if (frameList.list.Labels.length - 1 > now) setNow(now + 1);\r\n          }}\r\n        >\r\n          다음프레임\r\n        </div>\r\n        <div\r\n          style={{\r\n            marginRight: \"10px\",\r\n            borderRadius: \"10px\",\r\n            border: \"1px solid #828282\",\r\n            padding: \"10px\",\r\n          }}\r\n          onClick={() => {\r\n            setDelay(null);\r\n            setPlayChk(false);\r\n\r\n            if (frameList.list.Labels[now].select === false) {\r\n              if (selectList.length <= 9) {\r\n                setSelectList(selectList.concat(frameList.list.Labels[now]));\r\n                frameList.list.Labels[now].select = true;\r\n              } else window.alert(\"프레임은 최대 10개까지 고를수 있습니다.\");\r\n            } else if (frameList.list.Labels[now].select === true) {\r\n              setSelectList(\r\n                selectList.filter(\r\n                  (val, idx) => val.id !== frameList.list.Labels[now].id\r\n                )\r\n              );\r\n              frameList.list.Labels[now].select = false;\r\n            }\r\n          }}\r\n        >\r\n          선택\r\n        </div>\r\n      </div>\r\n      <div\r\n        style={{\r\n          marginTop: \"10px\",\r\n          overflow: \"scroll\",\r\n          overflowY: \"hidden\",\r\n          maxWidth: \"80vw\",\r\n          maxHeight: \"20vh\",\r\n        }}\r\n      >\r\n        {selectList.map((list, idx) => (\r\n          <div\r\n            style={{\r\n              order: list.id,\r\n            }}\r\n          >\r\n            <img\r\n              src={`http://localhost:5000/outputs/${frameList.list.name}/${list.name}`}\r\n              style={{\r\n                maxWidth: \"20vh\",\r\n                maxHeight: \"20vh\",\r\n              }}\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}